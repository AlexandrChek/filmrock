{"version":3,"file":"js/280.1c465b46.js","mappings":"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","sources":["webpack://filmrock/./src/views/RegistrationView.vue","webpack://filmrock/./src/components/FormReg.vue","webpack://filmrock/./src/components/FormReg.vue?59e4","webpack://filmrock/./src/views/RegistrationView.vue?8b3d"],"sourcesContent":["<template>\r\n    <LineHeader :left=\"false\">Registration</LineHeader>\r\n    <FormReg\r\n        @nameProblem=\"showModalWrongName\"\r\n        @passwordProblem=\"showModalPasswordProblem\"\r\n        ref=\"regForm\"\r\n    />\r\n    <ModalInfo v-if=\"modalShown\" @pressclose=\"closeModal\">\r\n        {{ modalMessage }}\r\n    </ModalInfo>\r\n    <div class=\"d-flex justify-content-center mt-5 mb-3\">\r\n        <AdvertPlace/>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport LineHeader from '../components/LineHeader.vue'\r\nimport FormReg from '../components/FormReg.vue'\r\nimport ModalInfo from '../components/ModalInfo.vue'\r\nimport AdvertPlace from '../components/AdvertPlace.vue'\r\n\r\nexport default {\r\n    name: 'RegistrationViev',\r\n    components: {\r\n        LineHeader,\r\n        FormReg,\r\n        ModalInfo,\r\n        AdvertPlace\r\n    },\r\n    data() {\r\n        return {\r\n            modalShown: false,\r\n            modalMessage: '',\r\n            userNameProblem: false\r\n        }\r\n    },\r\n    methods: {\r\n        showModalWrongName(problem) {\r\n            if (problem === 'shortUserName') {\r\n                this.modalMessage = 'The length of your user name must be not less than three symbols!'\r\n            } else if (problem === 'userNameUsed') {\r\n                this.modalMessage = 'This name is already in use by another user. Try another, please!'\r\n            }\r\n\r\n            this.userNameProblem = true\r\n            this.modalShown = true\r\n        },\r\n        showModalPasswordProblem(problem) {\r\n            if (problem === 'noPassword') {\r\n                this.modalMessage = 'Enter your password, please!'\r\n            }else if (problem === 'passwordMismatch') {\r\n                this.modalMessage = 'Your passwords in both fields must be identical!'\r\n            }\r\n\r\n            this.modalShown = true\r\n        },\r\n        closeModal() {\r\n            this.modalShown = false\r\n\r\n            if (this.userNameProblem) {\r\n                this.$refs.regForm.focusUserName()\r\n                this.userNameProblem = false\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>","<template>\r\n    <div class=\"d-flex justify-content-center pt-4\">\r\n        <form>\r\n            <div class=\"mb-3\">\r\n                <label for=\"userName\">User name</label>\r\n                <InputReg type=\"text\" id=\"userName\" @enterValue=\"updateUserName\"/>\r\n                <p class=\"prompt\">Not less than 3 symbols</p>\r\n            </div>\r\n            <div class=\"mb-3\">\r\n                <label for=\"password\">Password</label>\r\n                <InputReg type=\"password\" id=\"password\" @focus=\"checkUserName\" @enterValue=\"updatePassword\"/>\r\n            </div>\r\n            <div class=\"mb-4\">\r\n                <label for=\"password2\">Password (again)</label>\r\n                <InputReg type=\"password\" id=\"password2\" @enterValue=\"updatePassword2\"/>\r\n            </div>\r\n            <button class=\"btn btn-danger\" @click.prevent=\"register\">Register</button>\r\n        </form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport InputReg from './InputReg.vue'\r\nimport { getDatabase, ref, get, set } from \"firebase/database\"\r\n\r\nexport default {\r\n    name: 'FormReg',\r\n    components: {InputReg},\r\n    data() {\r\n        return {\r\n            userName: '',\r\n            password: '',\r\n            password2: ''\r\n        }\r\n    },\r\n    methods: {\r\n        updateUserName(value) {\r\n            this.userName = value\r\n        },\r\n        updatePassword(value) {\r\n            this.password = value\r\n        },\r\n        updatePassword2(value) {\r\n            this.password2 = value\r\n        },\r\n        checkUserName() {\r\n            if (this.userName.length < 3) {\r\n                this.$emit('nameProblem', 'shortUserName')\r\n            } else {\r\n                const db = getDatabase()\r\n                get(ref(db, 'users/'))\r\n                .then((snapshot) => {\r\n                    let finalObj = snapshot.val()\r\n                    let usersArr = Object.keys(finalObj)\r\n                    let isNameUsed = usersArr.find(e => {\r\n                        return e === this.userName\r\n                    })\r\n\r\n                    if (isNameUsed) {\r\n                        this.$emit('nameProblem', 'userNameUsed')\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        focusUserName() {\r\n            document.querySelector('#userName').focus()\r\n        },\r\n        register() {\r\n            if (!this.password) {\r\n                this.$emit('passwordProblem', 'noPassword')\r\n            } else if (this.password !== this.password2) {\r\n                this.$emit('passwordProblem', 'passwordMismatch')\r\n            } else {\r\n                const db = getDatabase()\r\n                set(ref(db, 'users/' + this.userName), {password: this.password})\r\n                localStorage.setItem('user', this.userName)\r\n                this.$store.state.user = this.userName\r\n                this.$router.push('/')\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import '../extends';\r\n@import '../variables';\r\n\r\n    form {\r\n        @extend %reg-block-size;\r\n    }\r\n    label {\r\n        @extend %label-reg;\r\n    }\r\n    .prompt {\r\n        font-size: calc(10px + .3vw);\r\n        color: $toxic-green;\r\n        @media (min-width: 576px) {\r\n            font-size: 13px;\r\n        }\r\n    }\r\n</style>","import { render } from \"./FormReg.vue?vue&type=template&id=f832635c&scoped=true\"\nimport script from \"./FormReg.vue?vue&type=script&lang=js\"\nexport * from \"./FormReg.vue?vue&type=script&lang=js\"\n\nimport \"./FormReg.vue?vue&type=style&index=0&id=f832635c&scoped=true&lang=scss\"\n\nimport exportComponent from \"D:\\\\Фронт-енд\\\\filmrock\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f832635c\"]])\n\nexport default __exports__","import { render } from \"./RegistrationView.vue?vue&type=template&id=44197418\"\nimport script from \"./RegistrationView.vue?vue&type=script&lang=js\"\nexport * from \"./RegistrationView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Фронт-енд\\\\filmrock\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createVNode","_component_LineHeader","left","_component_FormReg","onNameProblem","$options","onPasswordProblem","ref","$data","_createBlock","_component_ModalInfo","onPressclose","_createElementVNode","_component_AdvertPlace","for","_createElementBlock","_hoisted_3","_component_InputReg","type","id","onEnterValue","_hoisted_4","_hoisted_6","onFocus","_hoisted_8","onClick","name","components","InputReg","data","userName","password","password2","methods","updateUserName","value","this","updatePassword","updatePassword2","checkUserName","length","$emit","db","getDatabase","get","then","snapshot","finalObj","val","usersArr","Object","keys","isNameUsed","find","e","focusUserName","document","querySelector","focus","register","set","localStorage","setItem","$store","state","user","$router","push","__exports__","LineHeader","FormReg","ModalInfo","AdvertPlace","modalShown","modalMessage","userNameProblem","showModalWrongName","problem","showModalPasswordProblem","closeModal","$refs","regForm","render"],"sourceRoot":""}
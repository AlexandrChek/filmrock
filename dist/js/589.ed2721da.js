"use strict";(self["webpackChunkfilmrock"]=self["webpackChunkfilmrock"]||[]).push([[589],{3496:function(e,t,i){i.d(t,{Z:function(){return o}});var n=i(3396);function r(e,t,i,r,s,l){return(0,n.wg)(),(0,n.iD)("p",null,[(0,n.WI)(e.$slots,"default",{},void 0,!0)])}var s={name:"AdaptiveParagraf"},l=i(89);const a=(0,l.Z)(s,[["render",r],["__scopeId","data-v-eaf87bb6"]]);var o=a},6150:function(e,t,i){i.d(t,{Z:function(){return p}});var n=i(3396),r=i(7139);const s={class:"row d-flex justify-content-center mx-1 my-3"},l={class:"col-xl-3 col-lg-4 col-sm-4 col-5 p-0 text-center"},a=["src","alt"],o={class:"col-xl-8 col-lg-7 col-sm-8 col-7 px-xl-4"};function c(e,t,i,c,u,d){const g=(0,n.up)("FilmTitle"),h=(0,n.up)("AdaptiveParagraf");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",l,[(0,n._)("img",{src:i.film.src,alt:i.film.title,class:"img-fluid"},null,8,a)]),(0,n._)("div",o,[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(i.film.title),1)])),_:1}),(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" Year:  "+(0,r.zw)(i.film.year),1)])),_:1}),(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" Genres:  "+(0,r.zw)(i.film.genre)+", "+(0,r.zw)(i.film.genre2),1)])),_:1}),(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" Country:  "+(0,r.zw)(i.film.country),1)])),_:1}),(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" Director:  "+(0,r.zw)(i.film.director),1)])),_:1}),(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" Actors:  "+(0,r.zw)(i.film.actors)+" and others... ",1)])),_:1}),(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" Lasting:  "+(0,r.zw)(i.film.lasting),1)])),_:1}),(0,n.Wm)(h,{class:"m-0 ratings"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Rating:  "+(0,r.zw)(i.film.rating||0),1)])),_:1}),(0,n.Wm)(h,{class:"ratings"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Number of ratings:  "+(0,r.zw)(i.film.numberOfRatings||0),1)])),_:1}),(0,n.WI)(e.$slots,"default",{},void 0,!0)])])}function u(e,t,i,r,s,l){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.WI)(e.$slots,"default",{},void 0,!0)])}var d={name:"FilmTitle"},g=i(89);const h=(0,g.Z)(d,[["render",u],["__scopeId","data-v-4628f78c"]]);var w=h,v=i(3496),m={name:"SmallCard",props:["film"],components:{FilmTitle:w,AdaptiveParagraf:v.Z}};const f=(0,g.Z)(m,[["render",c],["__scopeId","data-v-3913e4a0"]]);var p=f},4589:function(e,t,i){i.r(t),i.d(t,{default:function(){return ae}});var n=i(3396),r=i(7139);const s=e=>((0,n.dD)("data-v-7b8021ee"),e=e(),(0,n.Cn)(),e),l={class:"container-fluid"},a={class:"row d-flex justify-content-center mx-1 mb-3"},o=s((()=>(0,n._)("b",null,"Description:",-1))),c={class:"row d-flex justify-content-center mx-1 my-2"},u={class:"row d-flex justify-content-center mx-1 mt-4"},d={class:"col-lg-11 col-12 p-0"},g={class:"row d-flex justify-content-center mx-1 mt-4"},h={class:"col-lg-11 col-12 mb-5 p-0"};function w(e,t,i,s,w,v){const m=(0,n.up)("MyButton"),f=(0,n.up)("AdaptiveParagraf"),p=(0,n.up)("SmallCard"),k=(0,n.up)("ModalRegWarning"),R=(0,n.up)("ModalRate"),_=(0,n.up)("VideoBlock"),b=(0,n.up)("LineHeader"),y=(0,n.up)("MovieLine"),C=(0,n.up)("ReviewForm"),M=(0,n.up)("ReviewsList");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(p,{film:w.currentFilm},{default:(0,n.w5)((()=>[w.notRated?((0,n.wg)(),(0,n.j4)(m,{key:0,onClick:v.rateFilm},{default:(0,n.w5)((()=>[(0,n.Uk)(" Rate the film ")])),_:1},8,["onClick"])):((0,n.wg)(),(0,n.j4)(f,{key:1,class:"rated"},{default:(0,n.w5)((()=>[(0,n.Uk)(" You have rated this film. Thank you! ")])),_:1}))])),_:1},8,["film"]),w.regWarning?((0,n.wg)(),(0,n.j4)(k,{key:0,onClosewarning:v.closeRegWarning},{default:(0,n.w5)((()=>[(0,n.Uk)(" To rate films you have to log into your account ore register. ")])),_:1},8,["onClosewarning"])):(0,n.kq)("",!0),w.showModalRate?((0,n.wg)(),(0,n.j4)(R,{key:1,onReseivingrating:v.setRating,onCloserating:v.closeModalRate},null,8,["onReseivingrating","onCloserating"])):(0,n.kq)("",!0),(0,n._)("div",a,[(0,n.Wm)(f,{class:"col-lg-11 col-12 m-0 p-0"},{default:(0,n.w5)((()=>[o,(0,n.Uk)("  "+(0,r.zw)(w.currentFilm.description),1)])),_:1})]),(0,n._)("div",c,[(0,n.Wm)(_,{trailerUrl:w.currentFilm.trailer,filmUrl:w.currentFilm.url},null,8,["trailerUrl","filmUrl"])]),(0,n._)("div",u,[(0,n._)("div",d,[(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[(0,n.Uk)("This might interest you:")])),_:1}),(0,n.Wm)(y,{list:v.shortList,position:w.position,rightArrowShown:v.rightArrowShown,onLeftArrowClicked:v.moveLeft,onRightArrowClicked:v.moveRight},null,8,["list","position","rightArrowShown","onLeftArrowClicked","onRightArrowClicked"])])]),(0,n._)("div",g,[(0,n._)("div",h,[(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Reviews")])),_:1}),(0,n.Wm)(C),w.reviewsLength?((0,n.wg)(),(0,n.j4)(M,{key:0,reviewsLength:w.reviewsLength,allReviews:w.allReviews},null,8,["reviewsLength","allReviews"])):(0,n.kq)("",!0)])])])}i(7658);var v=i(6150);const m={class:"col-lg-11 col-12 p-0"},f={class:"ratio ratio-16x9"},p=["src"];function k(e,t,i,s,l,a){const o=(0,n.up)("ColoredBtns");return(0,n.wg)(),(0,n.iD)("div",m,[(0,n.Wm)(o,{onClickMovie:a.onMovie,onClickTrailer:a.onTrailer},null,8,["onClickMovie","onClickTrailer"]),(0,n._)("div",{class:(0,r.C_)(["wrapper-static",{"wrapper-orange":l.orangeBack,"wrapper-burgundy":!l.orangeBack}])},[(0,n._)("div",f,[(0,n._)("iframe",{src:l.url,allowfullscreen:""},null,8,p)])],2)])}const R={class:"d-inline-flex"};function _(e,t,i,r,s,l){return(0,n.wg)(),(0,n.iD)("div",R,[(0,n._)("div",{class:"trailer-button",onClick:t[0]||(t[0]=(...e)=>l.onTrailer&&l.onTrailer(...e))},"Trailer"),(0,n._)("div",{class:"movie-button",onClick:t[1]||(t[1]=(...e)=>l.onMovie&&l.onMovie(...e))},"Movie")])}var b={name:"ColoredBtns",methods:{onMovie(){this.$emit("clickMovie")},onTrailer(){this.$emit("clickTrailer")}}},y=i(89);const C=(0,y.Z)(b,[["render",_],["__scopeId","data-v-49eb1154"]]);var M=C,W={name:"VideoBlock",components:{ColoredBtns:M},props:["trailerUrl","filmUrl"],data(){return{orangeBack:!0,url:""}},mounted(){const e=setInterval((()=>{this.url=this.trailerUrl,this.url&&clearInterval(e)}),10)},methods:{onMovie(){this.orangeBack=!1,this.url=this.filmUrl},onTrailer(){this.orangeBack=!0,this.url=this.trailerUrl}}};const F=(0,y.Z)(W,[["render",k],["__scopeId","data-v-b62a009c"]]);var L=F,U=i(3697),B=i(3496);const I={class:"modal-warning rounded"},x={class:"d-flex justify-content-around"};function S(e,t,i,r,s,l){return(0,n.wg)(),(0,n.iD)("div",I,[(0,n._)("p",null,[(0,n.WI)(e.$slots,"default",{},void 0,!0)]),(0,n._)("div",x,[(0,n._)("button",{class:"btn btn-danger",onClick:t[0]||(t[0]=(...e)=>l.logIn&&l.logIn(...e))},"Log in"),(0,n._)("button",{class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>l.register&&l.register(...e))},"Register"),(0,n._)("button",{class:"btn btn-danger",onClick:t[2]||(t[2]=(...e)=>l.close&&l.close(...e))},"Cancel")])])}var $={name:"ModalRegWarning",methods:{logIn(){this.$router.push("/logIn")},register(){this.$router.push("/registration")},close(){this.$emit("closewarning")}}};const Z=(0,y.Z)($,[["render",S],["__scopeId","data-v-2c2bb80a"]]);var j=Z,T=i(9242);const A=e=>((0,n.dD)("data-v-2d6c0594"),e=e(),(0,n.Cn)(),e),D={class:"modal-rating rounded"},z=A((()=>(0,n._)("p",null,"Rate the film (from 0 to 10):",-1))),H={class:"rate-wrapper"},q={class:"rating-value"},P={class:"d-flex justify-content-around"};function N(e,t,i,s,l,a){return(0,n.wg)(),(0,n.iD)("div",D,[z,(0,n._)("div",H,[(0,n.Uk)(" 0 "),(0,n.wy)((0,n._)("input",{type:"range",min:"0",max:"10",step:"0.5","onUpdate:modelValue":t[0]||(t[0]=e=>l.rating=e)},null,512),[[T.nr,l.rating]]),(0,n.Uk)(" 10 ")]),(0,n._)("div",q,(0,r.zw)(l.rating),1),(0,n._)("div",P,[(0,n._)("button",{class:"btn btn-success",onClick:t[1]||(t[1]=(...e)=>a.sendRating&&a.sendRating(...e))},"Rate"),(0,n._)("button",{class:"btn btn-danger",onClick:t[2]||(t[2]=(...e)=>a.close&&a.close(...e))},"Cancel")])])}var O={name:"ModalRate",data(){return{rating:0}},methods:{sendRating(){this.$emit("reseivingrating",this.rating)},close(){this.$emit("closerating")}}};const Y=(0,y.Z)(O,[["render",N],["__scopeId","data-v-2d6c0594"]]);var V=Y,G=i(2656),E=i(5391);function K(e,t,i,r,s,l){const a=(0,n.up)("MyButton"),o=(0,n.up)("ModalRegWarning");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("form",null,[(0,n.wy)((0,n._)("textarea",{placeholder:"Enter your review here",class:"d-block mb-2","onUpdate:modelValue":t[0]||(t[0]=e=>s.review=e),onFocus:t[1]||(t[1]=(...e)=>l.onFocusReview&&l.onFocusReview(...e))},null,544),[[T.nr,s.review]]),(0,n.Wm)(a,{onClick:(0,T.iM)(l.send,["prevent"])},{default:(0,n.w5)((()=>[(0,n.Uk)("Send")])),_:1},8,["onClick"])]),s.regWarning?((0,n.wg)(),(0,n.j4)(o,{key:0,onClosewarning:l.closeRegWarning},{default:(0,n.w5)((()=>[(0,n.Uk)(" To make comments you have to log into your account ore register. ")])),_:1},8,["onClosewarning"])):(0,n.kq)("",!0)],64)}var J=i(1178),Q={name:"ReviewForm",components:{MyButton:U.Z,ModalRegWarning:j},data(){return{review:"",regWarning:!1}},methods:{send(){if(this.$store.state.user){const e=(0,J.N8)(),t=this.$route.params.id,i=this.$store.state.user,n=this.review;let r=new Date,s=String(r.getFullYear()),l=String(r.getMonth());""===l&&(l="00"),1===l.length&&(l="0"+l);let a=String(r.getDate());""===a&&(a="00"),1===a.length&&(a="0"+a);let o=String(r.getHours());""===o&&(o="00"),1===o.length&&(o="0"+o);let c=String(r.getMinutes());""===c&&(c="00"),1===c.length&&(c="0"+c);let u=String(r.getSeconds());""===u&&(u="00"),1===u.length&&(u="0"+u);let d=Number(s+l+a+o+c+u),g=s+"-"+l+"-"+a+"_"+o+":"+c+":"+u;(0,J.t8)((0,J.iH)(e,"films/"+t+"/reviews/"+d),{revId:d,user:i,date:g,body:n}),this.review=""}else this.regWarning=!0},onFocusReview(){this.$store.state.user||(this.regWarning=!0,document.querySelector("textarea").blur())},closeRegWarning(){this.regWarning=!1}}};const X=(0,y.Z)(Q,[["render",K],["__scopeId","data-v-54c898a3"]]);var ee=X;function te(e,t,i,s,l,a){const o=(0,n.up)("AdaptiveParagraf"),c=(0,n.up)("MyButton");return(0,n.wg)(),(0,n.iD)(n.HY,null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.reviews,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e,class:"mt-3"},[(0,n.Wm)(o,{class:"m-0 review-head"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(e.user)+",  "+(0,r.zw)(e.date),1)])),_:2},1024),(0,n.Wm)(o,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(e.body),1)])),_:2},1024)])))),128)),l.allReviewsBtn?((0,n.wg)(),(0,n.j4)(c,{key:0,onClick:a.showAllReviews},{default:(0,n.w5)((()=>[(0,n.Uk)(" Show all reviews ")])),_:1},8,["onClick"])):(0,n.kq)("",!0),l.collapseRewiewsBtn?((0,n.wg)(),(0,n.j4)(c,{key:1,onClick:a.collapseRewiews},{default:(0,n.w5)((()=>[(0,n.Uk)(" Collapse rewiews ")])),_:1},8,["onClick"])):(0,n.kq)("",!0)],64)}var ie={name:"ReviewsList",props:["reviewsLength","allReviews"],components:{AdaptiveParagraf:B.Z,MyButton:U.Z},data(){return{reviews:[],allReviewsBtn:!1,collapseRewiewsBtn:!1}},mounted(){const e=setInterval((()=>{this.getReviews(),this.allReviews.length===this.reviewsLength&&clearInterval(e)}),10)},methods:{getReviews(){this.reviewsLength<=15?this.reviews=[...this.allReviews]:(this.reviews=this.allReviews.slice(0,15),this.allReviewsBtn=!0)},showAllReviews(){this.reviews=[...this.allReviews],this.allReviewsBtn=!1,this.collapseRewiewsBtn=!0},collapseRewiews(){this.reviews=this.allReviews.slice(0,15),this.collapseRewiewsBtn=!1,this.allReviewsBtn=!0}}};const ne=(0,y.Z)(ie,[["render",te],["__scopeId","data-v-d3899e4c"]]);var re=ne,se={name:"FilmCard",components:{SmallCard:v.Z,VideoBlock:L,MyButton:U.Z,AdaptiveParagraf:B.Z,ModalRegWarning:j,ModalRate:V,LineHeader:G.Z,MovieLine:E.Z,ReviewForm:ee,ReviewsList:re},data(){return{currentFilm:{},regWarning:!1,showModalRate:!1,notRated:!0,position:0,shortListLength:0,suitableMovies:[],id:this.$route.params.id,allReviews:[],reviewsLength:0}},mounted(){const e=(0,J.N8)(),t=(0,J.iH)(e,"films/");(0,J.jM)(t,(e=>{let t=e.val(),i=Object.values(t);this.currentFilm=i.filter((e=>e.id==this.id))[0];while(this.suitableMovies.length<10)if(this.currentFilm.relatedTo){for(let e=0;e<i.length;e++)i[e].relatedTo===this.currentFilm.relatedTo&&i[e].id!==this.currentFilm.id&&this.suitableMovies.push(i[e]);this.getSuitablesByGenre(i)}else this.getSuitablesByGenre(i);if(this.currentFilm.reviews){let e=Object.values(this.currentFilm.reviews);this.allReviews=e.sort(((e,t)=>t.revId-e.revId)),this.reviewsLength=this.allReviews.length}})),this.$store.state.user&&this.determineIsFilmRated(e),this.getShortListLength(),window.onresize=()=>this.getShortListLength()},watch:{$route(){document.location.reload()}},computed:{shortList(){let e=this.position,t=e+this.shortListLength;return this.suitableMovies.slice(e,t)},rightArrowShown(){return this.position<10-this.shortListLength}},methods:{determineIsFilmRated(e){const t=this.$store.state.user,i=(0,J.iH)(e,"users/"+t);(0,J.jM)(i,(e=>{let t=e.val();if(t.ratings){let e=Object.keys(t.ratings);for(let t=0;t<e.length;t++)if(e[t]===this.id)return void(this.notRated=!1)}}))},getSuitablesByGenre(e){for(let t=0;t<e.length;t++)e[t].id!=this.id&&!this.suitableMovies.includes(e[t])&&(e[t].genre===this.currentFilm.genre&&e[t].genre2===this.currentFilm.genre2||e[t].genre===this.currentFilm.genre2&&e[t].genre2===this.currentFilm.genre)&&this.suitableMovies.push(e[t]);for(let t=0;t<e.length;t++)e[t].id==this.id||this.suitableMovies.includes(e[t])||e[t].genre!==this.currentFilm.genre&&e[t].genre2!==this.currentFilm.genre2&&e[t].genre!==this.currentFilm.genre2&&e[t].genre2!==this.currentFilm.genre||this.suitableMovies.push(e[t])},getShortListLength(){let e=window.innerWidth;this.shortListLength=e>=992?5:e<992&&e>=768?4:e<768&&e>=576?3:2},rateFilm(){this.$store.state.user?this.showModalRate=!0:this.regWarning=!0},closeRegWarning(){this.regWarning=!1},closeModalRate(){this.showModalRate=!1},setRating(e){const t=(0,J.N8)(),i=this.currentFilm.rating,n=this.currentFilm.numberOfRatings;let r=Number(e);const s=n+1,l=this.id,a=this.$store.state.user;n&&(r=((n*i+r)/s).toFixed(1)),(0,J.t8)((0,J.iH)(t,"films/"+l+"/rating"),r),(0,J.t8)((0,J.iH)(t,"films/"+l+"/numberOfRatings"),s),(0,J.t8)((0,J.iH)(t,"users/"+a+"/ratings/"+l),!0),this.showModalRate=!1,this.$router.push("/"+l)},moveLeft(){this.position--},moveRight(){this.position++}}};const le=(0,y.Z)(se,[["render",w],["__scopeId","data-v-7b8021ee"]]);var ae=le}}]);
//# sourceMappingURL=589.ed2721da.js.map
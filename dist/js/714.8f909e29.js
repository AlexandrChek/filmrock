"use strict";(self["webpackChunkfilmrock"]=self["webpackChunkfilmrock"]||[]).push([[714],{1892:function(e,t,i){i.d(t,{Z:function(){return a}});var s=i(3396);function n(e,t,i,n,l,r){return(0,s.wg)(),(0,s.iD)("p",null,[(0,s.WI)(e.$slots,"default",{},void 0,!0)])}var l={name:"AdaptiveParagraf"},r=i(89);const o=(0,r.Z)(l,[["render",n],["__scopeId","data-v-9b85d81a"]]);var a=o},7841:function(e,t,i){i.d(t,{Z:function(){return a}});var s=i(3396);function n(e,t,i,n,l,r){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.WI)(e.$slots,"default",{},void 0,!0)])}var l={name:"FilmTitle"},r=i(89);const o=(0,r.Z)(l,[["render",n],["__scopeId","data-v-6f009d30"]]);var a=o},4714:function(e,t,i){i.r(t),i.d(t,{default:function(){return de}});var s=i(3396),n=i(7139);const l=e=>((0,s.dD)("data-v-1d5191e0"),e=e(),(0,s.Cn)(),e),r={class:"container-fluid"},o={class:"row d-flex justify-content-center m-2"},a={class:"col-xxl-3 col-md-3 col-sm-4 col-5 text-center"},u=["src","alt"],c={class:"col-xxl-8 col-md-9 col-sm-8 col-7"},h={class:"row d-flex justify-content-center mx-1 mb-3"},d=l((()=>(0,s._)("b",null,"Description:",-1))),g={class:"row d-flex justify-content-center mx-1 my-2"},m={class:"col-xxl-11 col-12"},w={key:0,class:"ratio ratio-16x9"},v=["src"],f={key:1,class:"ratio ratio-16x9"},p=["src"],b={class:"row d-flex justify-content-center mx-1 mt-4"},k={class:"col-xxl-11 col-12"},_={class:"d-inline-flex align-items-center justify-content-center w-100"},R={class:"d-inline-flex justify-content-center"},M=["href"],F=["src","alt"],W={class:"title-small"},y={class:"row d-flex justify-content-center mx-1 mt-4"},C={class:"col-xxl-11 col-12 mb-5"};function x(e,t,i,l,x,L){const U=(0,s.up)("FilmTitle"),j=(0,s.up)("AdaptiveParagraf"),B=(0,s.up)("MyButton"),z=(0,s.up)("ModalRegWarning"),D=(0,s.up)("ModalRate"),$=(0,s.up)("ColoredBtns"),T=(0,s.up)("LineHeader"),I=(0,s.up)("ArrowLeftBtn"),Z=(0,s.up)("FilmGenres"),S=(0,s.up)("ArrowRightBtn"),H=(0,s.up)("ReviewForm");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",o,[(0,s._)("div",a,[(0,s._)("img",{src:x.currentFilm.src,alt:x.currentFilm.title,class:"img-fluid"},null,8,u)]),(0,s._)("div",c,[(0,s.Wm)(U,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(x.currentFilm.title),1)])),_:1}),(0,s.Wm)(j,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Year:  "+(0,n.zw)(x.currentFilm.year),1)])),_:1}),(0,s.Wm)(j,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Genres:  "+(0,n.zw)(x.currentFilm.genre)+", "+(0,n.zw)(x.currentFilm.genre2),1)])),_:1}),(0,s.Wm)(j,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Country:  "+(0,n.zw)(x.currentFilm.country),1)])),_:1}),(0,s.Wm)(j,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Director:  "+(0,n.zw)(x.currentFilm.director),1)])),_:1}),(0,s.Wm)(j,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Actors:  "+(0,n.zw)(x.currentFilm.actors)+" and others...",1)])),_:1}),(0,s.Wm)(j,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Lasting:  "+(0,n.zw)(x.currentFilm.lasting),1)])),_:1}),(0,s.Wm)(j,{class:"m-0"},{default:(0,s.w5)((()=>[(0,s.Uk)("Rating:  "),(0,s._)("span",null,(0,n.zw)(x.rating),1)])),_:1}),(0,s.Wm)(j,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Number of ratings:  "),(0,s._)("span",null,(0,n.zw)(x.numberOfRatings),1)])),_:1}),x.notRated?((0,s.wg)(),(0,s.j4)(B,{key:0,onClick:L.rateFilm},{default:(0,s.w5)((()=>[(0,s.Uk)("Rate the film")])),_:1},8,["onClick"])):((0,s.wg)(),(0,s.j4)(j,{key:1,class:"rated"},{default:(0,s.w5)((()=>[(0,s.Uk)("You have rated this film. Thank you!")])),_:1}))]),x.regWarning?((0,s.wg)(),(0,s.j4)(z,{key:0,onClosewarning:L.closeRegWarning},{default:(0,s.w5)((()=>[(0,s.Uk)(" To rate films you have to log into your account ore register. ")])),_:1},8,["onClosewarning"])):(0,s.kq)("",!0),x.showModalRate?((0,s.wg)(),(0,s.j4)(D,{key:1,onReseivingrating:L.setRating,onCloserating:L.closeModalRate},null,8,["onReseivingrating","onCloserating"])):(0,s.kq)("",!0)]),(0,s._)("div",h,[(0,s.Wm)(j,{class:"col-xxl-11 col-12 m-0"},{default:(0,s.w5)((()=>[d,(0,s.Uk)("  "+(0,n.zw)(x.currentFilm.description),1)])),_:1})]),(0,s._)("div",g,[(0,s._)("div",m,[(0,s.Wm)($,{onClickMovie:L.onMovie,onClickTrailer:L.onTrailer},null,8,["onClickMovie","onClickTrailer"]),(0,s._)("div",{class:(0,n.C_)(["wrapper-static",{"wrapper-orange":x.trailer,"wrapper-burgundy":!x.trailer}])},[x.trailer?((0,s.wg)(),(0,s.iD)("div",w,[(0,s._)("iframe",{src:x.currentFilm.trailer,allowfullscreen:""},null,8,v)])):((0,s.wg)(),(0,s.iD)("div",f,[(0,s._)("iframe",{src:x.currentFilm.url,allowfullscreen:""},null,8,p)]))],2)])]),(0,s._)("div",b,[(0,s._)("div",k,[(0,s.Wm)(T,null,{default:(0,s.w5)((()=>[(0,s.Uk)("You might be interested with:")])),_:1}),(0,s._)("div",_,[x.position?((0,s.wg)(),(0,s.j4)(I,{key:0,onClick:L.goLeft},null,8,["onClick"])):(0,s.kq)("",!0),(0,s._)("div",R,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(L.shortList,(e=>((0,s.wg)(),(0,s.iD)("a",{href:"/"+e.id,key:e,class:"d-inline-flex movie-item"},[(0,s._)("div",null,[(0,s._)("img",{src:e.src,alt:e.title,class:"img-fluid"},null,8,F),(0,s._)("div",W,(0,n.zw)(e.title),1),(0,s.Wm)(Z,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.genre)+", "+(0,n.zw)(e.genre2),1)])),_:2},1024)])],8,M)))),128))]),x.position<10-x.shortListLength?((0,s.wg)(),(0,s.j4)(S,{key:1,onClick:L.goRight},null,8,["onClick"])):(0,s.kq)("",!0)])])]),(0,s._)("div",y,[(0,s._)("div",C,[(0,s.Wm)(T,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Reviews")])),_:1}),(0,s.Wm)(H),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(x.reviews,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"mt-3"},[(0,s.Wm)(j,{class:"m-0 review-head"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.user)+",  "+(0,n.zw)(e.date),1)])),_:2},1024),(0,s.Wm)(j,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.body),1)])),_:2},1024)])))),128)),x.allReviewsBtn?((0,s.wg)(),(0,s.j4)(B,{key:0,onClick:L.showAllReviews},{default:(0,s.w5)((()=>[(0,s.Uk)("Show all reviews")])),_:1},8,["onClick"])):(0,s.kq)("",!0),x.collapseRewiewsBtn?((0,s.wg)(),(0,s.j4)(B,{key:1,onClick:L.collapseRewiews},{default:(0,s.w5)((()=>[(0,s.Uk)("Collapse rewiews")])),_:1},8,["onClick"])):(0,s.kq)("",!0)])])])}i(7658);var L=i(6977),U=i(7841),j=i(1892);const B={class:"modal-warning rounded"},z={class:"text-center"};function D(e,t,i,n,l,r){return(0,s.wg)(),(0,s.iD)("div",B,[(0,s._)("p",null,[(0,s.WI)(e.$slots,"default",{},void 0,!0)]),(0,s._)("div",z,[(0,s._)("button",{class:"btn btn-danger m-2",onClick:t[0]||(t[0]=(...e)=>r.logIn&&r.logIn(...e))},"Log in"),(0,s._)("button",{class:"btn btn-danger m-2",onClick:t[1]||(t[1]=(...e)=>r.register&&r.register(...e))},"Register"),(0,s._)("button",{class:"btn btn-danger m-2",onClick:t[2]||(t[2]=(...e)=>r.close&&r.close(...e))},"Cancel")])])}var $={name:"ModalRegWarning",methods:{logIn(){this.$router.push("/logIn")},register(){this.$router.push("/registration")},close(){this.$emit("closewarning")}}},T=i(89);const I=(0,T.Z)($,[["render",D],["__scopeId","data-v-73db7ab4"]]);var Z=I,S=i(9242);const H=e=>((0,s.dD)("data-v-9d06e230"),e=e(),(0,s.Cn)(),e),O={class:"modal-rating rounded"},A=H((()=>(0,s._)("p",null,"Rate the film (from 0 to 10):",-1))),q={class:"rate-wrapper"},Y={class:"rating-value"},N={class:"text-center"};function G(e,t,i,l,r,o){return(0,s.wg)(),(0,s.iD)("div",O,[A,(0,s._)("div",q,[(0,s.Uk)(" 0 "),(0,s.wy)((0,s._)("input",{type:"range",min:"0",max:"10",step:"0.5","onUpdate:modelValue":t[0]||(t[0]=e=>r.rating=e)},null,512),[[S.nr,r.rating]]),(0,s.Uk)(" 10 ")]),(0,s._)("div",Y,(0,n.zw)(r.rating),1),(0,s._)("div",N,[(0,s._)("button",{class:"btn btn-success m-3",onClick:t[1]||(t[1]=(...e)=>o.sendRating&&o.sendRating(...e))},"Rate"),(0,s._)("button",{class:"btn btn-danger m-3",onClick:t[2]||(t[2]=(...e)=>o.close&&o.close(...e))},"Cancel")])])}var P={name:"ModalRate",data(){return{rating:0}},methods:{sendRating(){this.$emit("reseivingrating",this.rating)},close(){this.$emit("closerating")}}};const K=(0,T.Z)(P,[["render",G],["__scopeId","data-v-9d06e230"]]);var V=K;const E={class:"d-inline-flex"};function J(e,t,i,n,l,r){return(0,s.wg)(),(0,s.iD)("div",E,[(0,s._)("div",{class:"trailer-button",onClick:t[0]||(t[0]=(...e)=>r.onTrailer&&r.onTrailer(...e))},"Trailer"),(0,s._)("div",{class:"movie-button",onClick:t[1]||(t[1]=(...e)=>r.onMovie&&r.onMovie(...e))},"Movie")])}var Q={name:"ColoredBtns",methods:{onMovie(){this.$emit("clickMovie")},onTrailer(){this.$emit("clickTrailer")}}};const X=(0,T.Z)(Q,[["render",J],["__scopeId","data-v-1998c459"]]);var ee=X,te=i(4684),ie=i(5175),se=i(8549),ne=i(3473);function le(e,t,i,n,l,r){const o=(0,s.up)("MyButton"),a=(0,s.up)("ModalRegWarning");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("form",null,[(0,s.wy)((0,s._)("textarea",{placeholder:"Enter your review here",class:"d-block mb-2","onUpdate:modelValue":t[0]||(t[0]=e=>l.review=e),onFocus:t[1]||(t[1]=(...e)=>r.onFocusReview&&r.onFocusReview(...e))},null,544),[[S.nr,l.review]]),(0,s.Wm)(o,{onClick:(0,S.iM)(r.send,["prevent"])},{default:(0,s.w5)((()=>[(0,s.Uk)("Send")])),_:1},8,["onClick"])]),l.regWarning?((0,s.wg)(),(0,s.j4)(a,{key:0,onClosewarning:r.closeRegWarning},{default:(0,s.w5)((()=>[(0,s.Uk)(" To make comments you have to log into your account ore register. ")])),_:1},8,["onClosewarning"])):(0,s.kq)("",!0)],64)}var re=i(1178),oe={name:"ReviewForm",components:{MyButton:L.Z,ModalRegWarning:Z},data(){return{review:"",regWarning:!1}},methods:{send(){const e=(0,re.N8)();let t=this.$route.params.id,i=this.$store.state.user,s=this.review,n=new Date,l=String(n.getFullYear()),r=String(n.getMonth());""===r&&(r="00"),1===r.length&&(r="0"+r);let o=String(n.getDate());""===o&&(o="00"),1===o.length&&(o="0"+o);let a=String(n.getHours());""===a&&(a="00"),1===a.length&&(a="0"+a);let u=String(n.getMinutes());""===u&&(u="00"),1===u.length&&(u="0"+u);let c=String(n.getSeconds());""===c&&(c="00"),1===c.length&&(c="0"+c);let h=Number(l+r+o+a+u+c),d=l+"-"+r+"-"+o+"_"+a+":"+u+":"+c;(0,re.t8)((0,re.iH)(e,"films/"+t+"/reviews/"+h),{revId:h,user:i,date:d,body:s}),this.review=""},onFocusReview(){this.$store.state.user||(this.regWarning=!0,document.querySelector("textarea").blur())},closeRegWarning(){this.regWarning=!1}}};const ae=(0,T.Z)(oe,[["render",le],["__scopeId","data-v-37aa516a"]]);var ue=ae,ce={name:"FilmCard",components:{MyButton:L.Z,FilmTitle:U.Z,AdaptiveParagraf:j.Z,ModalRegWarning:Z,ModalRate:V,ColoredBtns:ee,LineHeader:te.Z,ArrowLeftBtn:ie.Z,ArrowRightBtn:se.Z,FilmGenres:ne.Z,ReviewForm:ue},data(){return{currentFilm:{},rating:0,numberOfRatings:0,regWarning:!1,showModalRate:!1,notRated:!0,trailer:!0,position:0,windowWidth:window.innerWidth,shortListLength:0,suitableMovies:[],id:this.$route.params.id,reviews:{},allReviews:{},allReviewsBtn:!1,collapseRewiewsBtn:!1}},mounted(){const e=(0,re.N8)(),t=(0,re.iH)(e,"films/");if((0,re.jM)(t,(e=>{let t=e.val(),i=Object.values(t);this.currentFilm=i.filter((e=>e.id==this.id))[0],this.currentFilm.rating&&(this.rating=this.currentFilm.rating),this.currentFilm.numberOfRatings&&(this.numberOfRatings=this.currentFilm.numberOfRatings);while(this.suitableMovies.length<10)if(this.currentFilm.relatedTo){for(let e=0;e<i.length;e++)i[e].relatedTo===this.currentFilm.relatedTo&&i[e].id!==this.currentFilm.id&&this.suitableMovies.push(i[e]);for(let e=0;e<i.length;e++){let t=i[e].id;if(i[e].genre===this.currentFilm.genre&&i[e].genre2===this.currentFilm.genre2&&t!==this.currentFilm.id)if(this.suitableMovies){let s=0;for(let e=0;e<this.suitableMovies.length;e++)this.suitableMovies[e].id===t&&s++;0===s&&this.suitableMovies.push(i[e])}else this.suitableMovies.push(i[e]);else if(i[e].genre===this.currentFilm.genre2&&i[e].genre2===this.currentFilm.genre&&t!==this.currentFilm.id)if(this.suitableMovies){let s=0;for(let e=0;e<this.suitableMovies.length;e++)this.suitableMovies[e].id===t&&s++;0===s&&this.suitableMovies.push(i[e])}else this.suitableMovies.push(i[e])}for(let e=0;e<i.length;e++){let t=i[e].id;if(i[e].genre===this.currentFilm.genre||i[e].genre===this.currentFilm.genre2||i[e].genre2===this.currentFilm.genre||i[e].genre2===this.currentFilm.genre2&&t!==this.currentFilm.id)if(this.suitableMovies){let s=0;for(let e=0;e<this.suitableMovies.length;e++)this.suitableMovies[e].id===t&&s++;0===s&&this.suitableMovies.push(i[e])}else this.suitableMovies.push(i[e])}}else{for(let e=0;e<i.length;e++){let t=i[e].id;if(i[e].genre===this.currentFilm.genre&&i[e].genre2===this.currentFilm.genre2&&t!==this.currentFilm.id)if(this.suitableMovies){let s=0;for(let e=0;e<this.suitableMovies.length;e++)this.suitableMovies[e].id===t&&s++;0===s&&this.suitableMovies.push(i[e])}else this.suitableMovies.push(i[e]);else if(i[e].genre===this.currentFilm.genre2&&i[e].genre2===this.currentFilm.genre&&t!==this.currentFilm.id)if(this.suitableMovies){let s=0;for(let e=0;e<this.suitableMovies.length;e++)this.suitableMovies[e].id===t&&s++;0===s&&this.suitableMovies.push(i[e])}else this.suitableMovies.push(i[e])}for(let e=0;e<i.length;e++){let t=i[e].id;if(i[e].genre===this.currentFilm.genre||i[e].genre===this.currentFilm.genre2||i[e].genre2===this.currentFilm.genre||i[e].genre2===this.currentFilm.genre2&&t!==this.currentFilm.id)if(this.suitableMovies){let s=0;for(let e=0;e<this.suitableMovies.length;e++)this.suitableMovies[e].id===t&&s++;0===s&&this.suitableMovies.push(i[e])}else this.suitableMovies.push(i[e])}}if(this.currentFilm.reviews){let e=Object.values(this.currentFilm.reviews),t=e.sort(((e,t)=>t.revId-e.revId));this.allReviews=t,t.length<=25?this.reviews=t:(this.reviews=t.slice(0,25),this.allReviewsBtn=!0)}})),this.$store.state.user){const t=this.$store.state.user,i=(0,re.iH)(e,"users/"+t);(0,re.jM)(i,(e=>{let t=e.val();if(t.ratings){let e=Object.keys(t.ratings);for(let t=0;t<e.length;t++)e[t]===this.id&&(this.notRated=!1)}}))}this.getShortListLength(),window.onresize=()=>{this.getShortListLength()}},computed:{shortList(){let e=this.position,t=e+this.shortListLength;return this.suitableMovies.slice(e,t)}},methods:{rateFilm(){this.$store.state.user?this.showModalRate=!0:this.regWarning=!0},closeRegWarning(){this.regWarning=!1},closeModalRate(){this.showModalRate=!1},setRating(e){const t=(0,re.N8)();let i=this.id,s=Number(e),n=this.numberOfRatings+1,l=this.$store.state.user;this.rating>0&&(s=((this.numberOfRatings*this.rating+s)/n).toFixed(1)),(0,re.t8)((0,re.iH)(t,"films/"+i+"/rating"),s),(0,re.t8)((0,re.iH)(t,"films/"+i+"/numberOfRatings"),n),(0,re.t8)((0,re.iH)(t,"users/"+l+"/ratings/"+i),!0),this.rating=s,this.numberOfRatings=n,this.showModalRate=!1,this.$router.push("/"+i)},onMovie(){this.trailer=!1},onTrailer(){this.trailer=!0},goLeft(){this.position--},goRight(){this.position++},getShortListLength(){this.windowWidth=window.innerWidth,this.windowWidth>=992?this.shortListLength=5:this.windowWidth<992&&this.windowWidth>=768?this.shortListLength=4:this.windowWidth<768&&this.windowWidth>=576?this.shortListLength=3:this.shortListLength=2},showAllReviews(){this.reviews=this.allReviews,this.allReviewsBtn=!1,this.collapseRewiewsBtn=!0},collapseRewiews(){this.reviews=this.allReviews.slice(0,25),this.collapseRewiewsBtn=!1,this.allReviewsBtn=!0}}};const he=(0,T.Z)(ce,[["render",x],["__scopeId","data-v-1d5191e0"]]);var de=he}}]);
//# sourceMappingURL=714.8f909e29.js.map
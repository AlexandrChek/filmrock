{"version":3,"file":"js/83.a7b821fe.js","mappings":"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","sources":["webpack://filmrock/./src/views/RegistrationView.vue","webpack://filmrock/./src/components/FormReg.vue","webpack://filmrock/./src/components/FormReg.vue?59e4","webpack://filmrock/./src/views/RegistrationView.vue?8b3d"],"sourcesContent":["<template>\r\n    <LineHeader :left=\"false\">Registration</LineHeader>\r\n    <FormReg\r\n        @nameProblem=\"showModalWrongName\"\r\n        @passwordProblem=\"showModalPasswordProblem\"\r\n        ref=\"regForm\"\r\n    />\r\n    <ModalInfo v-if=\"modalShown\" @pressclose=\"closeModal\">\r\n        {{ modalMessage }}\r\n    </ModalInfo>\r\n    <div class=\"d-flex justify-content-center mt-5 mb-3\">\r\n        <AdvertPlace/>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport LineHeader from '../components/LineHeader.vue'\r\nimport FormReg from '../components/FormReg.vue'\r\nimport ModalInfo from '../components/ModalInfo.vue'\r\nimport AdvertPlace from '../components/AdvertPlace.vue'\r\n\r\nexport default {\r\n    name: 'RegistrationViev',\r\n    components: {\r\n        LineHeader,\r\n        FormReg,\r\n        ModalInfo,\r\n        AdvertPlace\r\n    },\r\n    data() {\r\n        return {\r\n            modalShown: false,\r\n            modalMessage: '',\r\n            userNameProblem: false\r\n        }\r\n    },\r\n    methods: {\r\n        showModalWrongName(problem) {\r\n            if (problem === 'shortUserName') {\r\n                this.modalMessage = 'The length of your user name must be not less than three symbols!'\r\n            } else if (problem === 'userNameUsed') {\r\n                this.modalMessage = 'This name is already in use by another user. Try another, please!'\r\n            }\r\n\r\n            this.userNameProblem = true\r\n            this.modalShown = true\r\n        },\r\n        showModalPasswordProblem(problem) {\r\n            if (problem === 'noPassword') {\r\n                this.modalMessage = 'Enter your password, please!'\r\n            }else if (problem === 'passwordMismatch') {\r\n                this.modalMessage = 'Your passwords in both fields must be identical!'\r\n            }\r\n\r\n            this.modalShown = true\r\n        },\r\n        closeModal() {\r\n            this.modalShown = false\r\n\r\n            if (this.userNameProblem) {\r\n                this.$refs.regForm.focusUserName()\r\n                this.userNameProblem = false\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>","<template>\r\n    <div class=\"d-flex justify-content-center pt-4\">\r\n        <form>\r\n            <div class=\"mb-3\">\r\n                <label for=\"userName\">User name</label>\r\n                <InputReg type=\"text\" id=\"userName\" @enterValue=\"updateUserName\"/>\r\n                <p class=\"prompt\">Not less than 3 symbols</p>\r\n            </div>\r\n            <div class=\"mb-3\">\r\n                <label for=\"password\">Password</label>\r\n                <InputReg type=\"password\" id=\"password\" @focus=\"checkUserName\" @enterValue=\"updatePassword\"/>\r\n            </div>\r\n            <div class=\"mb-4\">\r\n                <label for=\"password2\">Password (again)</label>\r\n                <InputReg type=\"password\" id=\"password2\" @enterValue=\"updatePassword2\"/>\r\n            </div>\r\n            <button class=\"btn btn-danger\" @click.prevent=\"register\">Register</button>\r\n        </form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport InputReg from './InputReg.vue'\r\nimport { getDatabase, ref, set, onValue } from \"firebase/database\"\r\n\r\nexport default {\r\n    name: 'FormReg',\r\n    components: {InputReg},\r\n    data() {\r\n        return {\r\n            userName: '',\r\n            password: '',\r\n            password2: ''\r\n        }\r\n    },\r\n    methods: {\r\n        updateUserName(value) {\r\n            this.userName = value\r\n        },\r\n        updatePassword(value) {\r\n            this.password = value\r\n        },\r\n        updatePassword2(value) {\r\n            this.password2 = value\r\n        },\r\n        checkUserName() {\r\n            if (this.userName.length < 3) {\r\n                this.$emit('nameProblem', 'shortUserName')\r\n            } else {\r\n                const db = getDatabase()\r\n                const usersObj = ref(db, 'users/')\r\n                onValue(usersObj, (snapshot) => {\r\n                    let finalObj = snapshot.val()\r\n                    let usersArr = Object.values(finalObj)\r\n                    for (let i = 0; i < usersArr.length; i++) {\r\n                        if (this.userName === usersArr[i].userName) {\r\n                            this.$emit('nameProblem', 'userNameUsed')\r\n                            return\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        focusUserName() {\r\n            document.querySelector('#userName').focus()\r\n        },\r\n        register() {\r\n            if (!this.password) {\r\n                this.$emit('passwordProblem', 'noPassword')\r\n            } else if (this.password !== this.password2) {\r\n                this.$emit('passwordProblem', 'passwordMismatch')\r\n            } else {\r\n                const db = getDatabase()\r\n                let userName = this.userName\r\n                let password = this.password\r\n                set(ref(db, 'users/' + userName), {userName, password})\r\n                localStorage.setItem('user', userName)\r\n                this.$store.state.user = userName\r\n                this.$router.push('/')\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import '../extends';\r\n@import '../variables';\r\n\r\n    form {\r\n        @extend %reg-block-size;\r\n    }\r\n    label {\r\n        @extend %label-reg;\r\n    }\r\n    .prompt {\r\n        font-size: 13px;\r\n        color: $toxic-green;\r\n        @media (max-width: 575px) {\r\n            font-size: calc(10px + .3vw);\r\n        }\r\n    }\r\n</style>","import { render } from \"./FormReg.vue?vue&type=template&id=018c8502&scoped=true\"\nimport script from \"./FormReg.vue?vue&type=script&lang=js\"\nexport * from \"./FormReg.vue?vue&type=script&lang=js\"\n\nimport \"./FormReg.vue?vue&type=style&index=0&id=018c8502&scoped=true&lang=scss\"\n\nimport exportComponent from \"D:\\\\Фронт-енд\\\\filmrock\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-018c8502\"]])\n\nexport default __exports__","import { render } from \"./RegistrationView.vue?vue&type=template&id=44197418\"\nimport script from \"./RegistrationView.vue?vue&type=script&lang=js\"\nexport * from \"./RegistrationView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Фронт-енд\\\\filmrock\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createVNode","_component_LineHeader","left","_component_FormReg","onNameProblem","$options","onPasswordProblem","ref","$data","_createBlock","_component_ModalInfo","onPressclose","_createElementVNode","_component_AdvertPlace","for","_createElementBlock","_hoisted_3","_component_InputReg","type","id","onEnterValue","_hoisted_4","_hoisted_6","onFocus","_hoisted_8","onClick","name","components","InputReg","data","userName","password","password2","methods","updateUserName","value","this","updatePassword","updatePassword2","checkUserName","length","$emit","db","getDatabase","usersObj","onValue","snapshot","finalObj","val","usersArr","Object","values","i","focusUserName","document","querySelector","focus","register","set","localStorage","setItem","$store","state","user","$router","push","__exports__","LineHeader","FormReg","ModalInfo","AdvertPlace","modalShown","modalMessage","userNameProblem","showModalWrongName","problem","showModalPasswordProblem","closeModal","$refs","regForm","render"],"sourceRoot":""}
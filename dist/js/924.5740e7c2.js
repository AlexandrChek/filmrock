"use strict";(self["webpackChunkfilmrock"]=self["webpackChunkfilmrock"]||[]).push([[924],{7009:function(e,t,i){i.d(t,{Z:function(){return a}});var n=i(3396);function s(e,t,i,s,r,l){return(0,n.wg)(),(0,n.iD)("p",null,[(0,n.WI)(e.$slots,"default",{},void 0,!0)])}var r={name:"AdaptiveParagraf"},l=i(89);const o=(0,l.Z)(r,[["render",s],["__scopeId","data-v-b8dd9d58"]]);var a=o},3899:function(e,t,i){i.d(t,{Z:function(){return a}});var n=i(3396);function s(e,t,i,s,r,l){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.WI)(e.$slots,"default",{},void 0,!0)])}var r={name:"FilmTitle"},l=i(89);const o=(0,l.Z)(r,[["render",s],["__scopeId","data-v-5e7045b3"]]);var a=o},5924:function(e,t,i){i.r(t),i.d(t,{default:function(){return ae}});var n=i(3396),s=i(7139);const r=e=>((0,n.dD)("data-v-b1c39dce"),e=e(),(0,n.Cn)(),e),l={class:"container-fluid"},o={class:"row d-flex justify-content-center mx-1 my-2"},a={class:"col-xxl-3 col-md-3 col-sm-4 col-5 text-center img-wrapper"},u=["src","alt"],c={class:"col-xxl-8 col-md-9 col-sm-8 col-7"},d={class:"row d-flex justify-content-center mx-1 mb-3"},g=r((()=>(0,n._)("b",null,"Description:",-1))),h={class:"row d-flex justify-content-center mx-1 my-2"},w={class:"col-xxl-11 col-12"},m={key:0,class:"ratio ratio-16x9"},v=["src"],f={key:1,class:"ratio ratio-16x9"},p=["src"],k={class:"row d-flex justify-content-center mx-1 mt-4"},b={class:"col-xxl-11 col-12"},R={class:"d-inline-flex align-items-center justify-content-center w-100"},_={class:"row d-flex justify-content-center mx-1 mt-4"},M={class:"col-xxl-11 col-12 mb-5"};function F(e,t,i,r,F,y){const W=(0,n.up)("FilmTitle"),C=(0,n.up)("AdaptiveParagraf"),x=(0,n.up)("MyButton"),L=(0,n.up)("ModalRegWarning"),U=(0,n.up)("ModalRate"),B=(0,n.up)("ColoredBtns"),j=(0,n.up)("LineHeader"),$=(0,n.up)("ArrowLeftBtn"),T=(0,n.up)("MovieLine"),D=(0,n.up)("ArrowRightBtn"),I=(0,n.up)("ReviewForm");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("div",o,[(0,n._)("div",a,[(0,n._)("img",{src:F.currentFilm.src,alt:F.currentFilm.title,class:"img-fluid"},null,8,u)]),(0,n._)("div",c,[(0,n.Wm)(W,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(F.currentFilm.title),1)])),_:1}),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Year:  "+(0,s.zw)(F.currentFilm.year),1)])),_:1}),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Genres:  "+(0,s.zw)(F.currentFilm.genre)+", "+(0,s.zw)(F.currentFilm.genre2),1)])),_:1}),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Country:  "+(0,s.zw)(F.currentFilm.country),1)])),_:1}),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Director:  "+(0,s.zw)(F.currentFilm.director),1)])),_:1}),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Actors:  "+(0,s.zw)(F.currentFilm.actors)+" and others...",1)])),_:1}),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Lasting:  "+(0,s.zw)(F.currentFilm.lasting),1)])),_:1}),(0,n.Wm)(C,{class:"m-0"},{default:(0,n.w5)((()=>[(0,n.Uk)("Rating:  "),(0,n._)("span",null,(0,s.zw)(F.rating),1)])),_:1}),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Number of ratings:  "),(0,n._)("span",null,(0,s.zw)(F.numberOfRatings),1)])),_:1}),F.notRated?((0,n.wg)(),(0,n.j4)(x,{key:0,onClick:y.rateFilm},{default:(0,n.w5)((()=>[(0,n.Uk)("Rate the film")])),_:1},8,["onClick"])):((0,n.wg)(),(0,n.j4)(C,{key:1,class:"rated"},{default:(0,n.w5)((()=>[(0,n.Uk)("You have rated this film. Thank you!")])),_:1}))]),F.regWarning?((0,n.wg)(),(0,n.j4)(L,{key:0,onClosewarning:y.closeRegWarning},{default:(0,n.w5)((()=>[(0,n.Uk)(" To rate films you have to log into your account ore register. ")])),_:1},8,["onClosewarning"])):(0,n.kq)("",!0),F.showModalRate?((0,n.wg)(),(0,n.j4)(U,{key:1,onReseivingrating:y.setRating,onCloserating:y.closeModalRate},null,8,["onReseivingrating","onCloserating"])):(0,n.kq)("",!0)]),(0,n._)("div",d,[(0,n.Wm)(C,{class:"col-xxl-11 col-12 m-0"},{default:(0,n.w5)((()=>[g,(0,n.Uk)("  "+(0,s.zw)(F.currentFilm.description),1)])),_:1})]),(0,n._)("div",h,[(0,n._)("div",w,[(0,n.Wm)(B,{onClickMovie:y.onMovie,onClickTrailer:y.onTrailer},null,8,["onClickMovie","onClickTrailer"]),(0,n._)("div",{class:(0,s.C_)(["wrapper-static",{"wrapper-orange":F.trailer,"wrapper-burgundy":!F.trailer}])},[F.trailer?((0,n.wg)(),(0,n.iD)("div",m,[(0,n._)("iframe",{src:F.currentFilm.trailer,allowfullscreen:""},null,8,v)])):((0,n.wg)(),(0,n.iD)("div",f,[(0,n._)("iframe",{src:F.currentFilm.url,allowfullscreen:""},null,8,p)]))],2)])]),(0,n._)("div",k,[(0,n._)("div",b,[(0,n.Wm)(j,null,{default:(0,n.w5)((()=>[(0,n.Uk)("This might interest you:")])),_:1}),(0,n._)("div",R,[F.position?((0,n.wg)(),(0,n.j4)($,{key:0,onClick:y.goLeft},null,8,["onClick"])):(0,n.kq)("",!0),(0,n.Wm)(T,{list:y.shortList},null,8,["list"]),F.position<10-F.shortListLength?((0,n.wg)(),(0,n.j4)(D,{key:1,onClick:y.goRight},null,8,["onClick"])):(0,n.kq)("",!0)])])]),(0,n._)("div",_,[(0,n._)("div",M,[(0,n.Wm)(j,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Reviews")])),_:1}),(0,n.Wm)(I),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(F.reviews,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e,class:"mt-3"},[(0,n.Wm)(C,{class:"m-0 review-head"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.user)+",  "+(0,s.zw)(e.date),1)])),_:2},1024),(0,n.Wm)(C,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.body),1)])),_:2},1024)])))),128)),F.allReviewsBtn?((0,n.wg)(),(0,n.j4)(x,{key:0,onClick:y.showAllReviews},{default:(0,n.w5)((()=>[(0,n.Uk)("Show all reviews")])),_:1},8,["onClick"])):(0,n.kq)("",!0),F.collapseRewiewsBtn?((0,n.wg)(),(0,n.j4)(x,{key:1,onClick:y.collapseRewiews},{default:(0,n.w5)((()=>[(0,n.Uk)("Collapse rewiews")])),_:1},8,["onClick"])):(0,n.kq)("",!0)])])])}i(7658);var y=i(5333),W=i(3899),C=i(7009);const x={class:"modal-warning rounded"},L={class:"d-flex justify-content-around"};function U(e,t,i,s,r,l){return(0,n.wg)(),(0,n.iD)("div",x,[(0,n._)("p",null,[(0,n.WI)(e.$slots,"default",{},void 0,!0)]),(0,n._)("div",L,[(0,n._)("button",{class:"btn btn-danger",onClick:t[0]||(t[0]=(...e)=>l.logIn&&l.logIn(...e))},"Log in"),(0,n._)("button",{class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>l.register&&l.register(...e))},"Register"),(0,n._)("button",{class:"btn btn-danger",onClick:t[2]||(t[2]=(...e)=>l.close&&l.close(...e))},"Cancel")])])}var B={name:"ModalRegWarning",methods:{logIn(){this.$router.push("/logIn")},register(){this.$router.push("/registration")},close(){this.$emit("closewarning")}}},j=i(89);const $=(0,j.Z)(B,[["render",U],["__scopeId","data-v-017ded08"]]);var T=$,D=i(9242);const I=e=>((0,n.dD)("data-v-51d0eb30"),e=e(),(0,n.Cn)(),e),Z={class:"modal-rating rounded"},z=I((()=>(0,n._)("p",null,"Rate the film (from 0 to 10):",-1))),S={class:"rate-wrapper"},O={class:"rating-value"},H={class:"d-flex justify-content-around"};function A(e,t,i,r,l,o){return(0,n.wg)(),(0,n.iD)("div",Z,[z,(0,n._)("div",S,[(0,n.Uk)(" 0 "),(0,n.wy)((0,n._)("input",{type:"range",min:"0",max:"10",step:"0.5","onUpdate:modelValue":t[0]||(t[0]=e=>l.rating=e)},null,512),[[D.nr,l.rating]]),(0,n.Uk)(" 10 ")]),(0,n._)("div",O,(0,s.zw)(l.rating),1),(0,n._)("div",H,[(0,n._)("button",{class:"btn btn-success",onClick:t[1]||(t[1]=(...e)=>o.sendRating&&o.sendRating(...e))},"Rate"),(0,n._)("button",{class:"btn btn-danger",onClick:t[2]||(t[2]=(...e)=>o.close&&o.close(...e))},"Cancel")])])}var q={name:"ModalRate",data(){return{rating:0}},methods:{sendRating(){this.$emit("reseivingrating",this.rating)},close(){this.$emit("closerating")}}};const N=(0,j.Z)(q,[["render",A],["__scopeId","data-v-51d0eb30"]]);var Y=N;const G={class:"d-inline-flex"};function P(e,t,i,s,r,l){return(0,n.wg)(),(0,n.iD)("div",G,[(0,n._)("div",{class:"trailer-button",onClick:t[0]||(t[0]=(...e)=>l.onTrailer&&l.onTrailer(...e))},"Trailer"),(0,n._)("div",{class:"movie-button",onClick:t[1]||(t[1]=(...e)=>l.onMovie&&l.onMovie(...e))},"Movie")])}var V={name:"ColoredBtns",methods:{onMovie(){this.$emit("clickMovie")},onTrailer(){this.$emit("clickTrailer")}}};const E=(0,j.Z)(V,[["render",P],["__scopeId","data-v-299b7f47"]]);var K=E,J=i(488),Q=i(4882),X=i(9884),ee=i(910);function te(e,t,i,s,r,l){const o=(0,n.up)("MyButton"),a=(0,n.up)("ModalRegWarning");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("form",null,[(0,n.wy)((0,n._)("textarea",{placeholder:"Enter your review here",class:"d-block mb-2","onUpdate:modelValue":t[0]||(t[0]=e=>r.review=e),onFocus:t[1]||(t[1]=(...e)=>l.onFocusReview&&l.onFocusReview(...e))},null,544),[[D.nr,r.review]]),(0,n.Wm)(o,{onClick:(0,D.iM)(l.send,["prevent"])},{default:(0,n.w5)((()=>[(0,n.Uk)("Send")])),_:1},8,["onClick"])]),r.regWarning?((0,n.wg)(),(0,n.j4)(a,{key:0,onClosewarning:l.closeRegWarning},{default:(0,n.w5)((()=>[(0,n.Uk)(" To make comments you have to log into your account ore register. ")])),_:1},8,["onClosewarning"])):(0,n.kq)("",!0)],64)}var ie=i(1178),ne={name:"ReviewForm",components:{MyButton:y.Z,ModalRegWarning:T},data(){return{review:"",regWarning:!1}},methods:{send(){const e=(0,ie.N8)();let t=this.$route.params.id,i=this.$store.state.user,n=this.review,s=new Date,r=String(s.getFullYear()),l=String(s.getMonth());""===l&&(l="00"),1===l.length&&(l="0"+l);let o=String(s.getDate());""===o&&(o="00"),1===o.length&&(o="0"+o);let a=String(s.getHours());""===a&&(a="00"),1===a.length&&(a="0"+a);let u=String(s.getMinutes());""===u&&(u="00"),1===u.length&&(u="0"+u);let c=String(s.getSeconds());""===c&&(c="00"),1===c.length&&(c="0"+c);let d=Number(r+l+o+a+u+c),g=r+"-"+l+"-"+o+"_"+a+":"+u+":"+c;(0,ie.t8)((0,ie.iH)(e,"films/"+t+"/reviews/"+d),{revId:d,user:i,date:g,body:n}),this.review=""},onFocusReview(){this.$store.state.user||(this.regWarning=!0,document.querySelector("textarea").blur())},closeRegWarning(){this.regWarning=!1}}};const se=(0,j.Z)(ne,[["render",te],["__scopeId","data-v-1538ee6f"]]);var re=se,le={name:"FilmCard",components:{MyButton:y.Z,FilmTitle:W.Z,AdaptiveParagraf:C.Z,ModalRegWarning:T,ModalRate:Y,ColoredBtns:K,LineHeader:J.Z,ArrowLeftBtn:Q.Z,ArrowRightBtn:X.Z,MovieLine:ee.Z,ReviewForm:re},data(){return{currentFilm:{},rating:0,numberOfRatings:0,regWarning:!1,showModalRate:!1,notRated:!0,trailer:!0,position:0,windowWidth:window.innerWidth,shortListLength:0,suitableMovies:[],id:this.$route.params.id,reviews:{},allReviews:{},allReviewsBtn:!1,collapseRewiewsBtn:!1}},mounted(){const e=(0,ie.N8)(),t=(0,ie.iH)(e,"films/");if((0,ie.jM)(t,(e=>{let t=e.val(),i=Object.values(t);this.currentFilm=i.filter((e=>e.id==this.id))[0],this.currentFilm.rating&&(this.rating=this.currentFilm.rating),this.currentFilm.numberOfRatings&&(this.numberOfRatings=this.currentFilm.numberOfRatings);while(this.suitableMovies.length<10)if(this.currentFilm.relatedTo){for(let e=0;e<i.length;e++)i[e].relatedTo===this.currentFilm.relatedTo&&i[e].id!==this.currentFilm.id&&this.suitableMovies.push(i[e]);this.getSuitablesByGenre(i)}else this.getSuitablesByGenre(i);if(this.currentFilm.reviews){let e=Object.values(this.currentFilm.reviews),t=e.sort(((e,t)=>t.revId-e.revId));this.allReviews=t,t.length<=25?this.reviews=t:(this.reviews=t.slice(0,25),this.allReviewsBtn=!0)}})),this.$store.state.user){const t=this.$store.state.user,i=(0,ie.iH)(e,"users/"+t);(0,ie.jM)(i,(e=>{let t=e.val();if(t.ratings){let e=Object.keys(t.ratings);for(let t=0;t<e.length;t++)e[t]===this.id&&(this.notRated=!1)}}))}this.getShortListLength(),window.onresize=()=>{this.getShortListLength()}},watch:{$route(e,t){console.log(e.params.id+"-"+t.params.id),document.location.reload()}},computed:{shortList(){let e=this.position,t=e+this.shortListLength;return this.suitableMovies.slice(e,t)}},methods:{getSuitablesByGenre(e){for(let t=0;t<e.length;t++){let i=e[t].id;if(e[t].genre===this.currentFilm.genre&&e[t].genre2===this.currentFilm.genre2&&i!==this.currentFilm.id)if(this.suitableMovies){let n=0;for(let e=0;e<this.suitableMovies.length;e++)this.suitableMovies[e].id===i&&n++;0===n&&this.suitableMovies.push(e[t])}else this.suitableMovies.push(e[t]);else if(e[t].genre===this.currentFilm.genre2&&e[t].genre2===this.currentFilm.genre&&i!==this.currentFilm.id)if(this.suitableMovies){let n=0;for(let e=0;e<this.suitableMovies.length;e++)this.suitableMovies[e].id===i&&n++;0===n&&this.suitableMovies.push(e[t])}else this.suitableMovies.push(e[t])}for(let t=0;t<e.length;t++){let i=e[t].id;if(e[t].genre===this.currentFilm.genre||e[t].genre===this.currentFilm.genre2||e[t].genre2===this.currentFilm.genre||e[t].genre2===this.currentFilm.genre2&&i!==this.currentFilm.id)if(this.suitableMovies){let n=0;for(let e=0;e<this.suitableMovies.length;e++)this.suitableMovies[e].id===i&&n++;0===n&&this.suitableMovies.push(e[t])}else this.suitableMovies.push(e[t])}},rateFilm(){this.$store.state.user?this.showModalRate=!0:this.regWarning=!0},closeRegWarning(){this.regWarning=!1},closeModalRate(){this.showModalRate=!1},setRating(e){const t=(0,ie.N8)();let i=this.id,n=Number(e),s=this.numberOfRatings+1,r=this.$store.state.user;this.rating>0&&(n=((this.numberOfRatings*this.rating+n)/s).toFixed(1)),(0,ie.t8)((0,ie.iH)(t,"films/"+i+"/rating"),n),(0,ie.t8)((0,ie.iH)(t,"films/"+i+"/numberOfRatings"),s),(0,ie.t8)((0,ie.iH)(t,"users/"+r+"/ratings/"+i),!0),this.rating=n,this.numberOfRatings=s,this.showModalRate=!1,this.$router.push("/"+i)},onMovie(){this.trailer=!1},onTrailer(){this.trailer=!0},goLeft(){this.position--},goRight(){this.position++},getShortListLength(){this.windowWidth=window.innerWidth,this.windowWidth>=992?this.shortListLength=5:this.windowWidth<992&&this.windowWidth>=768?this.shortListLength=4:this.windowWidth<768&&this.windowWidth>=576?this.shortListLength=3:this.shortListLength=2},showAllReviews(){this.reviews=this.allReviews,this.allReviewsBtn=!1,this.collapseRewiewsBtn=!0},collapseRewiews(){this.reviews=this.allReviews.slice(0,25),this.collapseRewiewsBtn=!1,this.allReviewsBtn=!0}}};const oe=(0,j.Z)(le,[["render",F],["__scopeId","data-v-b1c39dce"]]);var ae=oe}}]);
//# sourceMappingURL=924.5740e7c2.js.map
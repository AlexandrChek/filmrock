"use strict";(self["webpackChunkfilmrock"]=self["webpackChunkfilmrock"]||[]).push([[280],{280:function(e,s,o){o.r(s),o.d(s,{default:function(){return E}});var r=o(3396),a=o(7139);const t={class:"d-flex justify-content-center mt-5 mb-3"};function n(e,s,o,n,l,m){const d=(0,r.up)("LineHeader"),i=(0,r.up)("FormReg"),u=(0,r.up)("ModalInfo"),h=(0,r.up)("AdvertPlace");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(d,{left:!1},{default:(0,r.w5)((()=>[(0,r.Uk)("Registration")])),_:1}),(0,r.Wm)(i,{onNameProblem:m.showModalWrongName,onPasswordProblem:m.showModalPasswordProblem,ref:"regForm"},null,8,["onNameProblem","onPasswordProblem"]),l.modalShown?((0,r.wg)(),(0,r.j4)(u,{key:0,onPressclose:m.closeModal},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(l.modalMessage),1)])),_:1},8,["onPressclose"])):(0,r.kq)("",!0),(0,r._)("div",t,[(0,r.Wm)(h)])],64)}var l=o(8208),m=o(9242);const d=e=>((0,r.dD)("data-v-f832635c"),e=e(),(0,r.Cn)(),e),i={class:"d-flex justify-content-center pt-4"},u={class:"mb-3"},h=d((()=>(0,r._)("label",{for:"userName"},"User name",-1))),c=d((()=>(0,r._)("p",{class:"prompt"},"Not less than 3 symbols",-1))),p={class:"mb-3"},w=d((()=>(0,r._)("label",{for:"password"},"Password",-1))),f={class:"mb-4"},b=d((()=>(0,r._)("label",{for:"password2"},"Password (again)",-1)));function N(e,s,o,a,t,n){const l=(0,r.up)("InputReg");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("form",null,[(0,r._)("div",u,[h,(0,r.Wm)(l,{type:"text",id:"userName",onEnterValue:n.updateUserName},null,8,["onEnterValue"]),c]),(0,r._)("div",p,[w,(0,r.Wm)(l,{type:"password",id:"password",onFocus:n.checkUserName,onEnterValue:n.updatePassword},null,8,["onFocus","onEnterValue"])]),(0,r._)("div",f,[b,(0,r.Wm)(l,{type:"password",id:"password2",onEnterValue:n.updatePassword2},null,8,["onEnterValue"])]),(0,r._)("button",{class:"btn btn-danger",onClick:s[0]||(s[0]=(0,m.iM)(((...e)=>n.register&&n.register(...e)),["prevent"]))},"Register")])])}o(7658);var P=o(1150),g=o(1178),v={name:"FormReg",components:{InputReg:P.Z},data(){return{userName:"",password:"",password2:""}},methods:{updateUserName(e){this.userName=e},updatePassword(e){this.password=e},updatePassword2(e){this.password2=e},checkUserName(){if(this.userName.length<3)this.$emit("nameProblem","shortUserName");else{const e=(0,g.N8)();(0,g.U2)((0,g.iH)(e,"users/")).then((e=>{let s=e.val(),o=Object.keys(s),r=o.find((e=>e===this.userName));r&&this.$emit("nameProblem","userNameUsed")}))}},focusUserName(){document.querySelector("#userName").focus()},register(){if(this.password)if(this.password!==this.password2)this.$emit("passwordProblem","passwordMismatch");else{const e=(0,g.N8)();(0,g.t8)((0,g.iH)(e,"users/"+this.userName),{password:this.password}),localStorage.setItem("user",this.userName),this.$store.state.user=this.userName,this.$router.push("/")}else this.$emit("passwordProblem","noPassword")}}},M=o(89);const y=(0,M.Z)(v,[["render",N],["__scopeId","data-v-f832635c"]]);var k=y,U=o(6442),_=o(1734),R={name:"RegistrationViev",components:{LineHeader:l.Z,FormReg:k,ModalInfo:U.Z,AdvertPlace:_.Z},data(){return{modalShown:!1,modalMessage:"",userNameProblem:!1}},methods:{showModalWrongName(e){"shortUserName"===e?this.modalMessage="The length of your user name must be not less than three symbols!":"userNameUsed"===e&&(this.modalMessage="This name is already in use by another user. Try another, please!"),this.userNameProblem=!0,this.modalShown=!0},showModalPasswordProblem(e){"noPassword"===e?this.modalMessage="Enter your password, please!":"passwordMismatch"===e&&(this.modalMessage="Your passwords in both fields must be identical!"),this.modalShown=!0},closeModal(){this.modalShown=!1,this.userNameProblem&&(this.$refs.regForm.focusUserName(),this.userNameProblem=!1)}}};const W=(0,M.Z)(R,[["render",n]]);var E=W}}]);
//# sourceMappingURL=280.1c465b46.js.map
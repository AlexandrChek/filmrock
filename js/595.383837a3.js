"use strict";(self["webpackChunkfilmrock"]=self["webpackChunkfilmrock"]||[]).push([[595],{9595:function(e,s,o){o.r(s),o.d(s,{default:function(){return E}});var r=o(3396),a=o(7139);const t={class:"d-flex justify-content-center mt-5 mb-3"};function n(e,s,o,n,l,d){const m=(0,r.up)("LineHeader"),u=(0,r.up)("FormReg"),i=(0,r.up)("ModalInfo"),c=(0,r.up)("AdvertPlace");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(m,{class:"header-center"},{default:(0,r.w5)((()=>[(0,r.Uk)("Registration")])),_:1}),(0,r.Wm)(u,{onNameProblem:d.showModalWrongName,onPasswordProblem:d.showModalPasswordProblem,ref:"regForm"},null,8,["onNameProblem","onPasswordProblem"]),l.modalShown?((0,r.wg)(),(0,r.j4)(i,{key:0,onPressclose:d.closeModal},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(l.modalMessage),1)])),_:1},8,["onPressclose"])):(0,r.kq)("",!0),(0,r._)("div",t,[(0,r.Wm)(c)])],64)}var l=o(2656),d=o(9242);const m=e=>((0,r.dD)("data-v-7c19615f"),e=e(),(0,r.Cn)(),e),u={class:"d-flex justify-content-center pt-3"},i={class:"mb-3"},c=m((()=>(0,r._)("label",{for:"userName"},"User name",-1))),h=m((()=>(0,r._)("p",{class:"prompt"},"Not less than 3 symbols",-1))),p={class:"mb-3"},w=m((()=>(0,r._)("label",{for:"password"},"Password",-1))),f={class:"mb-4"},b=m((()=>(0,r._)("label",{for:"password2"},"Password (again)",-1)));function N(e,s,o,a,t,n){const l=(0,r.up)("InputReg");return(0,r.wg)(),(0,r.iD)("div",u,[(0,r._)("form",null,[(0,r._)("div",i,[c,(0,r.Wm)(l,{type:"text",id:"userName",onEnterValue:n.updateUserName},null,8,["onEnterValue"]),h]),(0,r._)("div",p,[w,(0,r.Wm)(l,{type:"password",id:"password",onFocus:n.checkUserName,onEnterValue:n.updatePassword},null,8,["onFocus","onEnterValue"])]),(0,r._)("div",f,[b,(0,r.Wm)(l,{type:"password",id:"password2",onEnterValue:n.updatePassword2},null,8,["onEnterValue"])]),(0,r._)("button",{class:"btn btn-danger",onClick:s[0]||(s[0]=(0,d.iM)(((...e)=>n.register&&n.register(...e)),["prevent"]))},"Register")])])}o(7658);var g=o(9589),P=o(1178),v={name:"FormReg",components:{InputReg:g.Z},data(){return{userName:"",password:"",password2:""}},methods:{updateUserName(e){this.userName=e},updatePassword(e){this.password=e},updatePassword2(e){this.password2=e},checkUserName(){if(this.userName.length<3)this.$emit("nameProblem","shortUserName");else{const e=(0,P.N8)(),s=(0,P.iH)(e,"users/");(0,P.jM)(s,(e=>{let s=e.val(),o=Object.values(s);for(let r=0;r<o.length;r++)if(this.userName===o[r].userName)return void this.$emit("nameProblem","userNameUsed")}))}},focusUserName(){const e=document.querySelector("#userName");e.focus()},register(){if(this.password)if(this.password!==this.password2)this.$emit("passwordProblem","passwordMismatch");else{const e=(0,P.N8)();let s=this.userName,o=this.password;(0,P.t8)((0,P.iH)(e,"users/"+s),{userName:s,password:o}),localStorage.setItem("user",s),this.$store.state.user=s,this.$router.push("/")}else this.$emit("passwordProblem","noPassword")}}},M=o(89);const _=(0,M.Z)(v,[["render",N],["__scopeId","data-v-7c19615f"]]);var y=_,k=o(4144),U=o(1729),R={name:"RegistrationViev",components:{LineHeader:l.Z,FormReg:y,ModalInfo:k.Z,AdvertPlace:U.Z},data(){return{modalShown:!1,modalMessage:"",userNameProblem:!1}},methods:{showModalWrongName(e){"shortUserName"===e?this.modalMessage="The length of your user name must be not less than three symbols!":"userNameUsed"===e&&(this.modalMessage="This name is already in use by another user. Try another, please!"),this.userNameProblem=!0,this.modalShown=!0},showModalPasswordProblem(e){"noPassword"===e?this.modalMessage="Enter your password, please!":"passwordMismatch"===e&&(this.modalMessage="Your passwords in both fields must be identical!"),this.modalShown=!0},closeModal(){this.modalShown=!1,this.userNameProblem&&(this.$refs.regForm.focusUserName(),this.userNameProblem=!1)}}};const W=(0,M.Z)(R,[["render",n],["__scopeId","data-v-01eeed26"]]);var E=W}}]);
//# sourceMappingURL=595.383837a3.js.map